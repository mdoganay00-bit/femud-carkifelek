<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Femud Çarkıfelek</title>

<style>
    body {
        font-family: Arial, sans-serif;
        text-align: center;
        background: #f5f0ff;
        margin: 0;
        padding: 0;
    }
    h1 {
        color: #4b0082;
        margin-top: 25px;
        font-size: 28px;
        font-weight: bold;
    }
    #wheelCanvas {
        margin-top: 20px;
    }
    .inputBox {
        width: 80%;
        padding: 12px;
        margin: 8px auto;
        border-radius: 10px;
        border: 1px solid #b59de6;
        display: block;
        font-size: 16px;
    }
    #spinBtn {
        margin-top: 25px;
        padding: 18px;
        width: 80%;
        background: linear-gradient(90deg,#7a3ff2,#b37bff);
        color: white;
        border: none;
        border-radius: 12px;
        font-size: 22px;
        cursor: pointer;
        font-weight: bold;
    }
    #resultBox {
        margin-top: 25px;
        font-size: 18px;
        font-weight: bold;
        color: #4b0082;
    }
</style>

</head>
<body>

<h1>Femud Çekiliş Çarkı</h1>

<input id="nameInput" class="inputBox" placeholder="Katılımcı adı (zorunlu)" />
<input id="instaInput" class="inputBox" placeholder="Instagram adresi @kullanici (zorunlu)" />

<p style="color:#4b0082; font-size:15px; font-weight:bold;">
Femud_tr Instagram hesabını takip etmeyi unutmayınız.
</p>

<canvas id="wheelCanvas" width="360" height="360"></canvas>

<button id="spinBtn">ÇARKI ÇEVİR</button>

<div id="resultBox"></div>

<script>
/* ----------------------------------------
    HER DİLİMİN AYARINI SEN KONTROL EDERSİN
----------------------------------------- */

const slices = [
    {
        id: 1,
        text: "Tekrar\nÇevir",
        radius: 135,      // yazının merkeze uzaklığı
        angleShift: 0,    // sağ/sol kaydırma
        fontSize: 18      // yazı boyutu
    },
    {
        id: 2,
        text: "50 TL Femud\nÜrün Çeki",
        radius: 120,
        angleShift: 0,
        fontSize: 16
    },
    {
        id: 3,
        text: "Krem %15\nİndirim",
        radius: 125,
        angleShift: 5,
        fontSize: 17
    },
    {
        id: 4,
        text: "Köpük Sabun\nHediye",
        radius: 130,
        angleShift: -5,
        fontSize: 17
    },
    {
        id: 5,
        text: "6 ürün alana\n100 TL İndirim",
        radius: 120,
        angleShift: 0,
        fontSize: 14
    },
    {
        id: 6,
        text: "Tüm ürünlerde\n%20 indirim",
        radius: 120,
        angleShift: 0,
        fontSize: 15
    },
    {
        id: 7,
        text: "50 TL Femud\nÜrün Çeki",
        radius: 120,
        angleShift: 3,
        fontSize: 16
    },
    {
        id: 8,
        text: "Tekrar\nÇevir",
        radius: 135,
        angleShift: 0,
        fontSize: 18
    }
];

/* ---------------------------------------- */

const canvas = document.getElementById("wheelCanvas");
const ctx = canvas.getContext("2d");
const width = canvas.width;
const height = canvas.height;
const cx = width / 2;
const cy = height / 2;
const total = slices.length;
const step = 360 / total;

const colors = ["#ffe6e6","#fff0cc","#e6ffe6","#e6f7ff","#f2e6ff","#ffe6f2","#e6fff7","#f9e6ff"];

function drawWheel() {
    for (let i = 0; i < total; i++) {
        const start = (i * step) * Math.PI / 180;
        const end = ((i + 1) * step) * Math.PI / 180;

        ctx.beginPath();
        ctx.moveTo(cx, cy);
        ctx.arc(cx, cy, 170, start, end);
        ctx.fillStyle = colors[i % colors.length];
        ctx.fill();
        ctx.strokeStyle = "#4b0082";
        ctx.lineWidth = 4;
        ctx.stroke();

        // --- YAZI AYARLARI ---
        const slice = slices[i];
        const angle = (start + end) / 2 + slice.angleShift * Math.PI / 180;

        ctx.save();
        ctx.translate(cx, cy);
        ctx.rotate(angle);
        ctx.textAlign = "center";
        ctx.fillStyle = "#000";
        ctx.font = slice.fontSize + "px Arial";

        // Çok satırlı yazı
        const lines = slice.text.split("\n");
        let lineGap = slice.fontSize + 2;

        for (let l = 0; l < lines.length; l++) {
            ctx.fillText(lines[l], 0, -slice.radius + l * lineGap);
        }

        ctx.restore();
    }

    // MERKEZDE LOGO
    let img = new Image();
    img.src = "femud_logo.png";

    img.onload = () => {
        ctx.save();
        ctx.beginPath();
        ctx.arc(cx, cy, 55, 0, Math.PI * 2);
        ctx.closePath();
        ctx.clip();
        ctx.drawImage(img, cx - 55, cy - 55, 110, 110);
        ctx.restore();
    };
}

// ilk çizim
drawWheel();

/* ------------------------------------------
   ÇARKI ÇEVİRME İŞLEMİ
------------------------------------------- */
let currentRotation = 0;
document.getElementById("spinBtn").onclick = () => {

    const name = document.getElementById("nameInput").value.trim();
    const insta = document.getElementById("instaInput").value.trim();

    if (!name || !insta) {
        alert("İsim ve Instagram adresi zorunludur.");
        return;
    }

    let extra = Math.floor(Math.random() * 360);
    currentRotation += 2000 + extra;

    canvas.style.transition = "transform 4s ease-out";
    canvas.style.transform = "rotate(" + currentRotation + "deg)";

    setTimeout(() => {
        const normalized = (currentRotation % 360);
        const winIndex = Math.floor((360 - normalized) / step) % total;
        const winText = slices[winIndex].text.replace("\n"," ");

        document.getElementById("resultBox").innerHTML =
            name + " - @" + insta + "<br><br>Kazandığın ödül:<br><b>" +
            winText +
            "</b><br><br>Ekran görüntüsü alıp @femud_tr adresine mesaj göndererek ödülünü talep et.";

    }, 4200);
};

</script>

</body>
</html>
