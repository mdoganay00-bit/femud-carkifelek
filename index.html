<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FEMUD | Piyasa + Hediye Oyun Merkezi</title>

  <!-- 5 dk otomatik sayfa yenileme -->
  <meta http-equiv="refresh" content="300">

  <style>
    :root{
      --bg1:#050a14;
      --bg2:#071a33;
      --glass:rgba(255,255,255,.06);
      --stroke:rgba(255,255,255,.14);
      --txt:#eaf2ff;
      --muted:rgba(234,242,255,.72);
      --shadow:0 18px 55px rgba(0,0,0,.45);
      --shadow2:0 12px 30px rgba(0,0,0,.32);
      --r:18px;
      --acc:#66d6ff;
      --acc2:#7c4dff;
      --gold:#ffb300;

      /* OYUN SAYFASI (senin renklerin) */
      --p1:#2a0a57;
      --p2:#6a3cff;
      --txt2:#141423;
      --muted2:#5f6071;
      --r2:18px;
      --shadowX:0 18px 55px rgba(0,0,0,.32);
      --shadowY:0 10px 26px rgba(0,0,0,.18);
    }
    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{
      margin:0;
      font-family: system-ui,-apple-system,Segoe UI,Arial,sans-serif;
      background:
        radial-gradient(900px 600px at 15% 10%, rgba(255,255,255,.08), transparent 60%),
        radial-gradient(1000px 700px at 85% 15%, rgba(102,214,255,.12), transparent 55%),
        linear-gradient(140deg, var(--bg1), var(--bg2));
      color:var(--txt);
      overflow-x:hidden;
    }

    .glowHold{
      position:fixed; inset:-45%;
      background: conic-gradient(from 220deg,
        rgba(255,255,255,.08),
        rgba(102,214,255,.18),
        rgba(255,179,0,.16),
        rgba(124,77,255,.18),
        rgba(255,255,255,.08)
      );
      filter: blur(24px);
      animation: spin 14s linear infinite;
      opacity:.45;
      z-index:-2;
      pointer-events:none;
    }
    @keyframes spin{to{transform:rotate(360deg)}}

    .wrapHold{ width:min(1180px, 92vw); margin:0 auto; padding:18px 0 16px; }

    .topBar{
      border-radius: calc(var(--r) + 12px);
      padding:14px 14px;
      background: var(--glass);
      border:1px solid var(--stroke);
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      flex-wrap:wrap;
    }
    .brandRow{ display:flex; align-items:center; gap:12px; }
    .logoBox{
      width:52px;height:52px;border-radius:16px;
      display:grid;place-items:center;
      background: linear-gradient(135deg, rgba(102,214,255,.18), rgba(124,77,255,.18));
      border:1px solid var(--stroke);
      font-weight:950;
      letter-spacing:.4px;
      user-select:none;
      box-shadow: var(--shadow2);
    }
    .brandTxt h1{ margin:0; font-size:17px; font-weight:980; letter-spacing:.2px; }
    .brandTxt p{ margin:2px 0 0; font-size:12.5px; font-weight:850; color:var(--muted); }

    .navRow{ display:flex; gap:10px; flex-wrap:wrap; align-items:center; justify-content:flex-end; }
    .navRow a{
      text-decoration:none;
      color:var(--txt);
      font-weight:900;
      font-size:13px;
      padding:10px 12px;
      border-radius:14px;
      border:1px solid var(--stroke);
      background: rgba(255,255,255,.05);
    }
    .navRow a.primary{
      border-color: rgba(102,214,255,.30);
      background: linear-gradient(135deg, rgba(102,214,255,.16), rgba(124,77,255,.16));
    }

    .actionRow{
      margin-top:10px;
      display:flex; gap:10px; flex-wrap:wrap; align-items:center;
    }
    .btn{
      appearance:none;border:none;cursor:pointer;
      border-radius:14px;
      padding:12px 14px;
      font-weight:980;
      box-shadow: var(--shadow2);
      white-space:nowrap;
    }
    .btn.primary{ color:#02101e; background: linear-gradient(135deg, var(--acc), #8cf7ff, #4cc7ff); }
    .btn.ghost{ color:var(--txt); background: rgba(255,255,255,.06); border:1px solid var(--stroke); box-shadow:none; }
    .statusBox{
      flex:1 1 320px;
      border-radius:14px;
      border:1px solid var(--stroke);
      background: rgba(255,255,255,.04);
      padding:10px 12px;
      color:var(--muted);
      font-weight:850;
      font-size:12.5px;
      line-height:1.35;
    }

    .panel{
      border-radius: calc(var(--r) + 12px);
      border:1px solid var(--stroke);
      background: rgba(255,255,255,.06);
      box-shadow: var(--shadow);
      overflow:hidden;
      margin-top:12px;
    }
    .panelHead{
      padding:12px 14px;
      border-bottom:1px solid var(--stroke);
      background: rgba(255,255,255,.04);
    }
    .panelHead h2{ margin:0; font-size:15px; font-weight:980; letter-spacing:.2px; }
    .panelHead p{ margin:4px 0 0; font-size:12.6px; font-weight:850; color:var(--muted); line-height:1.4; }
    .panelBody{ padding:12px 14px 14px; }

    .tvBox{
      border-radius:16px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.20);
      overflow:hidden;
    }

    .kpiGrid{
      margin-top:12px;
      display:grid;
      grid-template-columns: 1fr;
      gap:12px;
    }
    @media(min-width:900px){ .kpiGrid{grid-template-columns: 1fr 1fr 1fr 1fr;} }

    .kpi{
      border-radius: calc(var(--r) + 10px);
      border:1px solid var(--stroke);
      background: rgba(255,255,255,.06);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .kpiHead{
      padding:12px 12px;
      border-bottom:1px solid var(--stroke);
      background: rgba(255,255,255,.04);
      display:flex;align-items:center;justify-content:space-between;gap:10px;
    }
    .kpiHead b{font-size:13px;font-weight:980;letter-spacing:.2px}
    .pill{
      font-size:11.5px;font-weight:950;
      padding:6px 9px;border-radius:999px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.18);
      color: rgba(234,242,255,.92);
      white-space:nowrap;
    }
    .kpiBody{padding:10px 12px 12px;}
    .miniNote{
      margin-top:8px;
      padding:10px 10px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.05);
      color: rgba(234,242,255,.92);
      font-size:12.4px;
      font-weight:850;
      line-height:1.55;
    }

    .reasonGrid{
      margin-top:12px;
      display:grid;
      grid-template-columns: 1fr;
      gap:12px;
    }
    @media(min-width:920px){ .reasonGrid{grid-template-columns: 1fr 1fr;} }

    .disclaimer{
      margin-top:12px;
      padding:12px 12px;
      border-radius:16px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.05);
      color: rgba(234,242,255,.88);
      font-size:12.4px;
      font-weight:850;
      line-height:1.55;
    }
    .disclaimer b{color:#fff}

    /* =========================
       OYUN + √úR√úN SAYFASI (senin css)
       ========================= */
    .wrap{
      width:min(1120px, 92vw);
      margin:0 auto;
      padding:26px 0 34px;
      color: var(--txt2);
    }
    .hero{
      border-radius: calc(var(--r2) + 10px);
      padding: 22px 18px 18px;
      background: rgba(255,255,255,.10);
      border: 1px solid rgba(255,255,255,.16);
      box-shadow: var(--shadowX);
      backdrop-filter: blur(10px);
      position: relative;
      overflow: hidden;
    }
    .hero::before{
      content:"";
      position:absolute; inset:-30%;
      background:
        radial-gradient(circle at 24% 18%, rgba(255,179,0,.40), transparent 58%),
        radial-gradient(circle at 78% 22%, rgba(255,255,255,.22), transparent 62%);
      opacity:.85;
      z-index:-1;
    }
    .toprow{display:flex;gap:18px;align-items:center;justify-content:center;flex-wrap:wrap;text-align:center;}
    .logoCircle{
      width:150px;height:150px;border-radius:50%;
      background: rgba(255,255,255,.95);
      box-shadow: 0 14px 34px rgba(0,0,0,.35);
      display:flex;align-items:center;justify-content:center;
      overflow:hidden;
      border: 2px solid rgba(255,255,255,.70);
      flex: 0 0 auto;
    }
    .logoCircle img{width:88%;height:88%;object-fit:contain;display:block}
    .brandText{display:flex;flex-direction:column;gap:6px;align-items:center;max-width: 760px;}
    .brandText h1{
      margin:0;
      font-size: clamp(26px, 3.6vw, 40px);
      font-weight: 950;
      letter-spacing:.2px;
      color:#fff;
      text-shadow: 0 10px 30px rgba(0,0,0,.35);
    }
    .brandText .sub{color: rgba(255,255,255,.92);font-weight: 800;font-size: 15px;letter-spacing:.2px}
    .headline{
      margin: 14px auto 0;
      width:min(900px, 95%);
      color:#fff;
      font-weight:800;
      font-size: clamp(15px, 2.1vw, 18px);
      line-height:1.5;
      text-shadow: 0 10px 28px rgba(0,0,0,.25);
    }
    .pillRow2{margin-top:14px;display:flex;gap:10px;flex-wrap:wrap;justify-content:center}
    .pill2{
      display:inline-flex;align-items:center;gap:8px;
      padding:10px 12px;border-radius:999px;
      background: rgba(255,255,255,.14);
      border: 1px solid rgba(255,255,255,.20);
      color:#fff;font-weight:800;font-size: 13px;
      box-shadow: 0 10px 22px rgba(0,0,0,.18);
    }
    .grid{ margin-top:18px; display:grid; grid-template-columns: 1fr; gap:14px; }
    @media(min-width:860px){.grid{grid-template-columns: 1fr 1fr;}}
    .card{
      background: rgba(255,255,255,.96);
      border-radius: calc(var(--r2) + 8px);
      box-shadow: var(--shadowY);
      overflow:hidden;
      border: 1px solid rgba(0,0,0,.06);
      position:relative;
    }
    .cardHeader{ padding:16px 16px 10px; display:flex; align-items:flex-start; justify-content:space-between; gap:10px; }
    .badge2{
      display:inline-flex;align-items:center;gap:8px;
      padding:8px 10px;border-radius: 999px;
      font-weight:950;font-size: 12px;color:#2b1b4a;
      background: linear-gradient(135deg, rgba(255,179,0,.38), rgba(124,77,255,.18));
      border: 1px solid rgba(0,0,0,.06);
      white-space:nowrap;
    }
    .cardTitle{ margin:6px 0 0; font-size: 20px; font-weight: 980; letter-spacing:.2px; color:#2a0a57; }
    .cardBody{ padding:0 16px 14px; color: var(--muted2); font-size: 14px; line-height:1.55; }
    .how{ margin-top:10px; display:grid; grid-template-columns: 1fr; gap:8px; }
    .step{ border-radius: 14px; padding:10px 12px; background:#f6f3ff; border:1px solid rgba(0,0,0,.05); color:#2a0a57; font-weight:800; font-size: 13px; }
    .ctaRow{ padding: 0 16px 16px; display:flex; gap:10px; flex-wrap:wrap; align-items:center; justify-content:space-between; }
    .btnGame{
      appearance:none;border:none;cursor:pointer;
      border-radius: 16px;padding: 13px 14px;
      font-weight: 980;font-size: 14px;color:#fff;
      flex: 1 1 240px;text-align:center;text-decoration:none;
      position:relative;overflow:hidden;
      box-shadow: 0 12px 24px rgba(0,0,0,.22);
      display:block;
    }
    .btnGame.primary{background: linear-gradient(135deg, #ff9800, #ffb300, #ff6d00);}
    .btnGame.secondary{background: linear-gradient(135deg, #7c4dff, #512da8, #2a0a57);}
    .fine{ flex: 1 1 260px; font-size: 12px; color: #6b6b78; line-height: 1.4; }

    .trust{
      margin-top:14px;
      padding:14px 16px;
      background: rgba(255,255,255,.92);
      border-radius: calc(var(--r2) + 6px);
      box-shadow: var(--shadowY);
      border:1px solid rgba(0,0,0,.06);
      text-align:left;
    }
    .trust h3{margin:0 0 6px;font-size: 15px;font-weight: 980;color:#2a0a57;}
    .trust ul{margin:0;padding-left:18px;color:#4f5062;font-weight:750;font-size: 13px;line-height: 1.55;}
    .trust li{margin:4px 0}

    .section{
      margin-top: 16px;
      background: rgba(255,255,255,.10);
      border: 1px solid rgba(255,255,255,.16);
      border-radius: calc(var(--r2) + 10px);
      box-shadow: var(--shadowX);
      backdrop-filter: blur(10px);
      overflow:hidden;
    }
    .sectionHead{
      padding: 14px 16px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      flex-wrap:wrap;
      gap:10px;
    }
    .sectionHead h2{margin:0;color:#fff;font-size: 18px;font-weight: 980;letter-spacing:.2px}
    .sectionHead .mini{color: rgba(255,255,255,.88);font-weight:800;font-size: 13px}

    .productGrid{
      padding: 0 14px 16px;
      display:grid;
      grid-template-columns: 1fr;
      gap:12px;
    }
    @media(min-width:860px){.productGrid{grid-template-columns: 1fr 1fr;}}
    .pCard{
      background: rgba(255,255,255,.96);
      border-radius: calc(var(--r2) + 6px);
      box-shadow: var(--shadowY);
      padding: 14px;
      border: 1px solid rgba(0,0,0,.06);
    }
    .pTitle{margin:0 0 6px;font-size: 16px;font-weight: 980;color:#2a0a57}
    .pMeta{font-size: 12px;font-weight:900;color:#6a1b9a;margin-bottom: 8px}
    .pList{margin:0;padding-left: 18px;color:#515163;font-weight:750;font-size: 13px;line-height: 1.55}
    .pList li{margin: 4px 0}

    .aboutCards{margin-top:12px;display:grid;grid-template-columns: 1fr;gap:12px}
    @media(min-width:860px){.aboutCards{ grid-template-columns: 1fr 1fr 1fr; }}
    .aCard{
      background:#ffffff;
      border:1px solid rgba(0,0,0,.06);
      box-shadow: 0 14px 28px rgba(0,0,0,.12);
      border-radius:18px;
      padding:14px 14px 12px;
      position:relative;
      overflow:hidden;
    }
    .aCard::before{
      content:"";
      position:absolute;
      inset:-40%;
      background: radial-gradient(circle at 20% 20%, rgba(255,179,0,.22), transparent 55%),
                radial-gradient(circle at 80% 30%, rgba(124,77,255,.16), transparent 60%);
      filter: blur(10px);
      opacity:.9;
    }
    .aCard h3{
      position:relative;
      margin:0 0 8px;
      font-size:14px;
      font-weight: 980;
      color:#2a0a57;
      display:flex;
      align-items:center;
      gap:8px;
    }
    .aCard p{
      position:relative;
      margin:0;
      font-size:12.8px;
      line-height:1.65;
      color:#515163;
      font-weight:760;
    }
    .aMiniRow{
      position:relative;
      margin-top:10px;
      display:flex;
      gap:8px;
      flex-wrap:wrap;
    }
    .aMini{
      display:inline-flex;
      align-items:center;
      gap:7px;
      padding:7px 9px;
      border-radius:999px;
      background: rgba(124,77,255,.10);
      border:1px solid rgba(124,77,255,.14);
      color:#2a0a57;
      font-weight:900;
      font-size:11.5px;
    }
    .aMini .dot{
      width:8px;height:8px;border-radius:50%;
      background: linear-gradient(135deg,#ffb300,#7c4dff);
    }
    footer{
      margin-top: 16px;
      color: rgba(255,255,255,.86);
      font-size: 12px;
      text-align:center;
      padding: 10px 0 6px;
    }
    footer b{color:#fff}

/* =========================
   EK CSS (ALTIN + HABER + MODAL + SABƒ∞T BUTONLAR)
   ========================= */
.goldGrid{ margin-top:12px; display:grid; grid-template-columns:1fr; gap:12px; }
@media(min-width:900px){ .goldGrid{grid-template-columns:1fr 1fr 1fr;} }
.goldCard{ background:rgba(255,255,255,.06); border:1px solid var(--stroke); border-radius:18px; box-shadow:var(--shadow); overflow:hidden; }
.goldHead{ padding:12px; background:rgba(255,255,255,.04); border-bottom:1px solid var(--stroke); display:flex; justify-content:space-between; align-items:center; gap:10px; }
.goldBody{padding:12px;}
.goldPrice{ font-size:22px; font-weight:1000; color:#fff; }
.goldSub{ margin-top:6px; font-size:12.5px; color:rgba(234,242,255,.8); font-weight:850; }

.newsGrid{ margin-top:12px; display:grid; grid-template-columns:1fr; gap:12px; }
@media(min-width:920px){ .newsGrid{grid-template-columns:1fr 1fr;} }
.newsCard{ border-radius: calc(var(--r) + 10px); border:1px solid var(--stroke); background: rgba(255,255,255,.06); box-shadow: var(--shadow); overflow:hidden; }
.newsHead{ padding:12px 12px; border-bottom:1px solid var(--stroke); background: rgba(255,255,255,.04); display:flex; align-items:center; justify-content:space-between; gap:10px; flex-wrap:wrap; }
.newsHead b{ font-size:13px; font-weight:980; letter-spacing:.2px; color: var(--txt); }
.newsBody{ padding:10px 12px 12px; }
.newsItem{ padding:12px; border-radius:14px; background:rgba(255,255,255,.05); border:1px solid rgba(255,255,255,.12); margin-bottom:10px; }
.newsItem:last-child{margin-bottom:0}
.newsTitle{ font-size:14px; font-weight:980; color:#fff; line-height:1.35; }
.newsMeta{ margin-top:6px; display:flex; gap:8px; flex-wrap:wrap; color:rgba(234,242,255,.78); font-weight:850; font-size:12px; }
.newsBtn{ margin-top:8px; padding:10px 12px; border-radius:12px; font-weight:980; border:none; cursor:pointer; background:linear-gradient(135deg,var(--acc),#8cf7ff); color:#02101e; box-shadow: var(--shadow2); }

.modalOverlay{ position:fixed; inset:0; background:rgba(0,0,0,.7); display:none; justify-content:center; align-items:center; z-index:9999; padding:16px; }
.modalOverlay.open{display:flex;}
.modalBox{ width:min(1100px,96vw); height:85vh; background:#0a0e1a; border-radius:18px; overflow:hidden; display:flex; flex-direction:column; border:1px solid rgba(255,255,255,.16); box-shadow:0 22px 70px rgba(0,0,0,.55); }
.modalTop{ padding:10px; background:rgba(255,255,255,.05); display:flex; justify-content:space-between; align-items:center; gap:10px; border-bottom:1px solid rgba(255,255,255,.14); }
.modalFrame{ flex:1; border:none; width:100%; background:#fff; }

.quickFloat{ position:fixed; right:14px; bottom:14px; display:flex; flex-direction:column; gap:10px; z-index:9998; }
.qBtn{ display:flex; gap:10px; padding:12px 14px; border-radius:16px; font-weight:980; text-decoration:none; color:#fff; background:linear-gradient(135deg,rgba(102,214,255,.25),rgba(124,77,255,.25)); box-shadow:0 12px 28px rgba(0,0,0,.3); border:1px solid rgba(255,255,255,.14); backdrop-filter: blur(10px); }
.qBtn .ico{ width:28px;height:28px; border-radius:12px; display:grid; place-items:center; background: rgba(0,0,0,.18); border:1px solid rgba(255,255,255,.14); }
.qBtn.primary{ background: linear-gradient(135deg, rgba(102,214,255,.22), rgba(124,77,255,.22)); border:1px solid rgba(255,255,255,.16); }

body.modalLock{ overflow:hidden !important; }

  </style>
</head>

<body>
  <div class="glowHold" aria-hidden="true"></div>

  <!-- =========================
       Pƒ∞YASA PANELƒ∞
       ========================= -->
  <div class="wrapHold" id="piyasa">

    <div class="topBar">
      <div class="brandRow">
        <div class="logoBox">F</div>
        <div class="brandTxt">
          <h1>FEMUD Piyasa Paneli</h1>
          <p>USD ‚Ä¢ EUR ‚Ä¢ Altƒ±n ‚Ä¢ G√ºm√º≈ü ‚Äî 5 dk g√ºncellenir + G√ºncelle butonu</p>
        </div>
      </div>
      <div class="navRow">
        <a class="primary" href="#piyasa">Piyasalar</a>
        <a href="#oyunlar">Oyunlar</a>
        <a href="#urunler">√úr√ºnler</a>
        <a href="#hakkimizda">Hakkƒ±mƒ±zda</a>
      </div>
    </div>

    <div class="actionRow">
      <button class="btn primary" id="refreshBtn">FEMUD Verileri G√ºncelle</button>
      <button class="btn ghost" id="scrollGames">Oyunlara ƒ∞n</button>
      <div class="statusBox" id="statusBox">Son g√ºncelleme: - ‚Ä¢ Otomatik yenileme: 05:00</div>
    </div>

    <div class="panel">
      <div class="panelHead">
        <h2>Canlƒ± Piyasa Bandƒ±</h2>
        <p>ƒ∞nternet olan her yerde canlƒ± g√∂r√ºn√ºr (TradingView)</p>
      </div>
      <div class="panelBody">
        <div class="tvBox">
          <div class="tradingview-widget-container">
            <div class="tradingview-widget-container__widget"></div>
            <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-ticker-tape.js" async>
            {
              "symbols": [
                {"proName":"FX_IDC:USDTRY","title":"USD/TRY"},
                {"proName":"FX_IDC:EURTRY","title":"EUR/TRY"},
                {"proName":"OANDA:XAUUSD","title":"ALTIN (XAU/USD)"},
                {"proName":"OANDA:XAGUSD","title":"G√úM√ú≈û (XAG/USD)"}
              ],
              "showSymbolLogo": true,
              "isTransparent": true,
              "displayMode": "adaptive",
              "colorTheme": "dark",
              "locale": "tr"
            }
            </script>
          </div>
        </div>

        <div class="disclaimer">
          <b>Not:</b> Bu panel bilgilendirme ama√ßlƒ±dƒ±r. Yatƒ±rƒ±m tavsiyesi deƒüildir.
        </div>
      </div>
    </div>

    <!-- KPI kartlarƒ± -->
    <div class="kpiGrid">
      <div class="kpi">
        <div class="kpiHead"><b>USD/TRY</b><span class="pill">Kur</span></div>
        <div class="kpiBody">
          <div class="tvBox">
            <div class="tradingview-widget-container">
              <div class="tradingview-widget-container__widget"></div>
              <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-single-quote.js" async>
              {"symbol":"FX_IDC:USDTRY","width":"100%","colorTheme":"dark","isTransparent":true,"locale":"tr"}
              </script>
            </div>
          </div>
          <div class="miniNote"><b>Y√ºkselebilir:</b> DXY artƒ±≈üƒ± / risk artƒ±≈üƒ±. <br><b>D√º≈üebilir:</b> risk azalmasƒ± / faiz beklentisi.</div>
        </div>
      </div>

      <div class="kpi">
        <div class="kpiHead"><b>EUR/TRY</b><span class="pill">Kur</span></div>
        <div class="kpiBody">
          <div class="tvBox">
            <div class="tradingview-widget-container">
              <div class="tradingview-widget-container__widget"></div>
              <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-single-quote.js" async>
              {"symbol":"FX_IDC:EURTRY","width":"100%","colorTheme":"dark","isTransparent":true,"locale":"tr"}
              </script>
            </div>
          </div>
          <div class="miniNote"><b>Y√ºkselebilir:</b> EURUSD g√º√ßlenmesi. <br><b>D√º≈üebilir:</b> Avrupa zayƒ±f veri / risk d√º≈ü√º≈ü√º.</div>
        </div>
      </div>

      <div class="kpi">
        <div class="kpiHead"><b>ALTIN</b><span class="pill">XAU/USD</span></div>
        <div class="kpiBody">
          <div class="tvBox">
            <div class="tradingview-widget-container">
              <div class="tradingview-widget-container__widget"></div>
              <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-single-quote.js" async>
              {"symbol":"OANDA:XAUUSD","width":"100%","colorTheme":"dark","isTransparent":true,"locale":"tr"}
              </script>
            </div>
          </div>
          <div class="miniNote"><b>Y√ºkselebilir:</b> jeopolitik risk / faiz d√º≈ü√º≈ü√º. <br><b>D√º≈üebilir:</b> reel faiz y√ºkseli≈üi.</div>
        </div>
      </div>

      <div class="kpi">
        <div class="kpiHead"><b>G√úM√ú≈û</b><span class="pill">XAG/USD</span></div>
        <div class="kpiBody">
          <div class="tvBox">
            <div class="tradingview-widget-container">
              <div class="tradingview-widget-container__widget"></div>
              <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-single-quote.js" async>
              {"symbol":"OANDA:XAGUSD","width":"100%","colorTheme":"dark","isTransparent":true,"locale":"tr"}
              </script>
            </div>
          </div>
          <div class="miniNote"><b>Y√ºkselebilir:</b> sanayi talebi + altƒ±n r√ºzg√¢rƒ±. <br><b>D√º≈üebilir:</b> b√ºy√ºme endi≈üesi.</div>
        </div>
      </div>
    </div>

    <!-- Sebep kutularƒ± (holding tarzƒ±) -->
    <div class="reasonGrid">
      <div class="panel">
        <div class="panelHead">
          <h2>Bug√ºn Kurlarƒ± Etkileyen 3 Ana Parametre</h2>
          <p>Dolar/Euro i√ßin</p>
        </div>
        <div class="panelBody">
          <div class="miniNote">
            1) <b>K√ºresel dolar endeksi (DXY)</b> <br>
            2) <b>Risk algƒ±sƒ±</b> (jeopolitik / piyasa stres) <br>
            3) <b>Faiz beklentileri</b> (TL faiz y√∂n√º / k√ºresel faiz y√∂n√º)
          </div>
        </div>
      </div>

      <div class="panel">
        <div class="panelHead">
          <h2>Altƒ±n & G√ºm√º≈ü Neden Hareketlenir?</h2>
          <p>G√ºvenli liman + sanayi etkisi</p>
        </div>
        <div class="panelBody">
          <div class="miniNote">
            <b>Altƒ±n:</b> g√ºvenli liman + reel faiz <br>
            <b>G√ºm√º≈ü:</b> altƒ±n + <b>sanayi talebi</b> (daha oynak)
          </div>
        </div>
      </div>
    </div>

    <!-- =========================
         EK: GRAM / √áEYREK / TAM ALTIN
         ========================= -->
    <div class="panel" id="femud-altin-panel">
      <div class="panelHead">
        <h2>Altƒ±n Fiyatlarƒ± (Canlƒ±)</h2>
        <p>Gram Altƒ±n ‚Ä¢ √áeyrek Altƒ±n ‚Ä¢ Tam Altƒ±n ‚Äî Bilgilendirme ama√ßlƒ±dƒ±r.</p>
      </div>
      <div class="panelBody">
        <div class="goldGrid">
          <div class="goldCard">
            <div class="goldHead"><b>Gram Altƒ±n</b><span class="pill">‚Ç∫</span></div>
            <div class="goldBody">
              <div class="goldPrice" id="femudGramAltin">-</div>
              <div class="goldSub" id="femudGramAltinMeta">G√ºncelleniyor‚Ä¶</div>
            </div>
          </div>

          <div class="goldCard">
            <div class="goldHead"><b>√áeyrek Altƒ±n</b><span class="pill">‚Ç∫</span></div>
            <div class="goldBody">
              <div class="goldPrice" id="femudCeyrekAltin">-</div>
              <div class="goldSub" id="femudCeyrekAltinMeta">G√ºncelleniyor‚Ä¶</div>
            </div>
          </div>

          <div class="goldCard">
            <div class="goldHead"><b>Tam Altƒ±n</b><span class="pill">‚Ç∫</span></div>
            <div class="goldBody">
              <div class="goldPrice" id="femudTamAltin">-</div>
              <div class="goldSub" id="femudTamAltinMeta">G√ºncelleniyor‚Ä¶</div>
            </div>
          </div>
        </div>

        <div class="disclaimer">
          <b>Not:</b> Fiyatlar kaynaklara g√∂re k√º√ß√ºk fark g√∂sterebilir. Yatƒ±rƒ±m tavsiyesi deƒüildir.
        </div>
      </div>
    </div>

    <!-- =========================
         EK: D√úNYA G√úNDEMƒ∞ HABERLER (10+)
         ========================= -->
    <div class="panel" id="femud-haber-panel">
      <div class="panelHead">
        <h2>D√ºnya G√ºndemi (Ekonomi & Piyasa)</h2>
        <p>En az 10 haber ‚Ä¢ 12 saatte bir g√ºncellenir ‚Ä¢ ‚ÄúTƒ±kla Oku‚Äù ile sayfa kapanmadan a√ßƒ±lƒ±r.</p>
      </div>

      <div class="panelBody">
        <div class="newsGrid">
          <div class="newsCard">
            <div class="newsHead">
              <b>Son Haberler</b>
              <span class="pill" id="femudNewsStamp">Son g√ºncelleme: -</span>
            </div>
            <div class="newsBody" id="femudNewsList">
              <div class="newsItem">
                <div class="newsTitle">Haberler hazƒ±rlanƒ±yor‚Ä¶</div>
                <div class="newsMeta">L√ºtfen bekleyin.</div>
                <button class="newsBtn" type="button" disabled>Y√ºkleniyor</button>
              </div>
            </div>
          </div>

          <div class="newsCard">
            <div class="newsHead">
              <b>Bu Haberler Neyi Etkiler?</b>
              <span class="pill">√ñzet</span>
            </div>
            <div class="newsBody">
              <div class="miniNote">
                <b>1)</b> Faiz/Enflasyon kararlarƒ± ‚Üí <b>USD, EUR, Altƒ±n</b><br>
                <b>2)</b> Jeopolitik risk & enerji ‚Üí <b>Kur, Altƒ±n, G√ºm√º≈ü</b><br>
                <b>3)</b> B√ºy√ºme/durgunluk verileri ‚Üí <b>G√ºm√º≈ü, sanayi talebi</b><br>
                <b>4)</b> Risk i≈ütahƒ± ‚Üí <b>G√ºvenli liman</b> hareketleri
              </div>
              <div class="disclaimer">
                <b>Not:</b> Haber paneli bilgilendirme ama√ßlƒ±dƒ±r. Yatƒ±rƒ±m tavsiyesi deƒüildir.
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div><!-- /wrapHold #piyasa -->

  <!-- HABER OKUMA MODALI (sayfa kapanmadan) -->
  <div class="modalOverlay" id="femudNewsModal" aria-hidden="true">
    <div class="modalBox" role="dialog" aria-modal="true" aria-label="Femud Haber Okuma">
      <div class="modalTop">
        <div style="font-weight:980;color:#fff" id="femudModalTitle">Haber</div>
        <div style="display:flex;gap:8px;align-items:center;">
          <button class="btn ghost" id="femudOpenNewTab" type="button">Yeni sekmede a√ß ‚Üó</button>
          <button class="btn ghost" id="femudModalClose" type="button">Kapat ‚úï</button>
        </div>
      </div>
      <iframe class="modalFrame" id="femudModalFrame" src="about:blank" title="Haber"></iframe>
    </div>
  </div>

  <!-- =========================
       OYUNLAR
       ========================= -->
  <div class="wrap" id="oyunlar">
    <div class="hero">
      <div class="toprow">
        <div class="logoCircle">
          <img src="femud_logo.png" alt="FEMUD Logo">
        </div>

        <div style="max-width:1100px;margin:40px auto;text-align:center;">
          <img
            src="images/femud-urunler.jpg"
            alt="Femud √úr√ºnleri"
            style="width:100%;height:auto;border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,0.25);"
          >
        </div>

        <div class="brandText">
          <h1>Doƒüadan Gelen G√º√ß</h1>
          <div class="sub">Hediye Oyunlarƒ± √úcretsizdir.</div>

          <div class="pillRow2">
            <div class="pill2">üéÅ √úcretsiz Hediye Oyun Merkezi</div>
            <div class="pill2">‚è±Ô∏è Hediye 24 Saat Ge√ßerli</div>
            <div class="pill2">üì© Kazanƒ±nca: ekran g√∂r√ºnt√ºs√º ‚Üí @Femud_tr DM</div>
          </div>
        </div>
      </div>

      <div class="headline">
        Femud √ºr√ºnlerini <b>indirimli</b> almak i√ßin a≈üaƒüƒ±daki oyunlardan birini se√ß:
        <b>√áarkƒ±felek</b> veya <b>Kazƒ± Kazan</b>.
      </div>

      <div class="grid">
        <div class="card">
          <div class="cardHeader">
            <div>
              <div class="badge2">üé° Hƒ±zlƒ± √ñd√ºl</div>
              <div class="cardTitle">Femud √áarkƒ±felek</div>
            </div>
          </div>

          <div class="cardBody">
            1 tƒ±kla oyuna gir, √ßarkƒ± √ßevir ve anƒ±nda indirim ≈üansƒ± yakala.
            <div class="how">
              <div class="step">1) √áarkƒ±felek‚Äôe gir</div>
              <div class="step">2) √áarkƒ± √ßevir</div>
              <div class="step">3) Kazandƒ±ysan ekran g√∂r√ºnt√ºs√º al ‚Üí @Femud_tr DM</div>
            </div>
          </div>

          <div class="ctaRow">
            <a class="btnGame primary" id="btnCark" href="carkifelek.html">√áarkƒ±felek‚Äôe Gir</a>
            <div class="fine">Eƒüer a√ßƒ±lmƒ±yorsa: dosya adƒ±/klas√∂r yolu farklƒ±dƒ±r.</div>
          </div>
        </div>

        <div class="card">
          <div class="cardHeader">
            <div>
              <div class="badge2">üí• S√ºrpriz & Heyecan</div>
              <div class="cardTitle">Femud Kazƒ± Kazan</div>
            </div>
          </div>

          <div class="cardBody">
            Kutucuklarƒ± a√ß, aynƒ± √∂d√ºl√º 3 kez yakalarsan kupon senin!
            <div class="how">
              <div class="step">1) Kazƒ± Kazan‚Äôa gir</div>
              <div class="step">2) Kutularƒ± a√ß, aynƒ± √∂d√ºl√º yakala</div>
              <div class="step">3) Kazandƒ±ysan ekran g√∂r√ºnt√ºs√º al ‚Üí @Femud_tr DM</div>
            </div>
          </div>

          <div class="ctaRow">
            <a class="btnGame secondary" id="btnKazi" href="kazikazan4x4.html">Kazƒ± Kazan‚Äôa Gir</a>
            <div class="fine">Not: Hediyeler 24 saat ge√ßerlidir. √úcretsizdir.</div>
          </div>
        </div>
      </div>

      <div class="trust">
        <h3>G√ºven & ≈ûeffaflƒ±k</h3>
        <ul>
          <li>Oyunlar <b>√ºcretsizdir</b>; ama√ß m√º≈üteriye indirim fƒ±rsatƒ± sunmaktƒ±r.</li>
          <li>Kazananlar hediyeyi almak i√ßin <b>ekran g√∂r√ºnt√ºs√º</b> ile <b>@Femud_tr</b> hesabƒ±na DM atar.</li>
          <li>Kupon/hediye <b>24 saat</b> i√ßinde ge√ßerlidir.</li>
        </ul>
      </div>
    </div>

    <!-- =========================
         √úR√úN √ñZELLƒ∞KLERƒ∞
         ========================= -->
    <div class="section" id="urunler">
      <div class="sectionHead">
        <h2>Femud √úr√ºn √ñzellikleri</h2>
        <div class="mini"></div>
      </div>

      <div class="productGrid">
        <div class="pCard">
          <div class="pTitle">Mentoll√º ≈ûampuan</div>
          <div class="pMeta">Termal su ‚Ä¢ Yerli √ºretim ‚Ä¢ Kepek</div>
          <ul class="pList">
            <li>Termal su ile √ºretilmi≈ütir.</li>
            <li>Yerli √úretimdir.</li>
            <li>Ferahlatƒ±cƒ± mentol etkisi saƒülar.</li>
            <li>130 TL 350ml.</li>
          </ul>
        </div>

        <div class="pCard">
          <div class="pTitle">Lavanta K√∂p√ºk Sabun</div>
          <div class="pMeta">Termal su ‚Ä¢ Yerli √ºretimdir ‚Ä¢ Kuruluk yapmaz</div>
          <ul class="pList">
            <li>Termal su ile √ºretilmi≈ütir.</li>
            <li>Krem etkisi ile ellerde kuruluk yapmaz.</li>
            <li>Yerli √ºretimdir.</li>
            <li>75 TL 500ml.</li>
          </ul>
        </div>

        <div class="pCard">
          <div class="pTitle">Lavanta Oda Parf√ºm√º</div>
          <div class="pMeta">Lavanta √∂zl√º ‚Ä¢ Termal su ‚Ä¢ Yerli √ºretim</div>
          <ul class="pList">
            <li>Lavanta √∂zl√ºd√ºr, termal su ile √ºretilmi≈ütir.</li>
            <li>Kƒ±yafetlerde kullanƒ±labilir.</li>
            <li>Yerli √ºretimdir.</li>
            <li>105 TL 400ml.</li>
          </ul>
        </div>

        <div class="pCard">
          <div class="pTitle">Limon Kolonyasƒ± (80¬∞)</div>
          <div class="pMeta">Termal su ‚Ä¢ 80 derece ‚Ä¢ √áatlak yapmaz</div>
          <ul class="pList">
            <li>Termal su ile √ºretilmi≈ütir.</li>
            <li>80 derece limon kolonyasƒ±dƒ±r.</li>
            <li>105 TL 400ml.</li>
          </ul>
        </div>

        <div class="pCard">
          <div class="pTitle">Kestane √ñzl√º V√ºcut Kremi (50 ml)</div>
          <div class="pMeta">Kolay emilim ‚Ä¢ Kadifemsi etki ‚Ä¢ Nem artƒ±rƒ±r</div>
          <ul class="pList">
            <li>Kolay emilim saƒülar, kadifemsi etki bƒ±rakƒ±r.</li>
            <li>Nemi artƒ±rƒ±r, kuruluƒüu azaltƒ±r.</li>
            <li>70 TL 50ml.</li>
          </ul>
        </div>

        <div class="pCard">
          <div class="pTitle">Kestane √ñzl√º V√ºcut Kremi (250 ml)</div>
          <div class="pMeta">Aile boyu ‚Ä¢ Yoƒüun nemlendirme</div>
          <ul class="pList">
            <li>Kolay emilim saƒülar, kadifemsi etki bƒ±rakƒ±r.</li>
            <li>Nemi artƒ±rƒ±r, kuruluƒüu azaltƒ±r.</li>
            <li>135 TL 250ml.</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- =========================
         HAKKIMIZDA
         ========================= -->
    <div class="section" id="hakkimizda">
      <div class="sectionHead">
        <h2>Hakkƒ±mƒ±zda</h2>
        <div class="mini">Termal su ‚Ä¢ Yerli √ºretim ‚Ä¢ Nat√ºrel √ßizgi</div>
      </div>

      <div style="padding:0 14px 16px;">
        <div class="aboutCards">
          <div class="aCard">
            <h3>üéØ Vizyon</h3>
            <p>
              Termal su temelli yakla≈üƒ±mƒ±, yerli √ºretim g√ºvencesiyle birle≈ütirip
              g√ºnl√ºk bakƒ±mda <b>premium</b> kaliteyi herkes i√ßin ula≈üƒ±labilir kƒ±lmak.
            </p>
            <div class="aMiniRow">
              <span class="aMini"><span class="dot"></span> Termal su</span>
              <span class="aMini"><span class="dot"></span> Kalite</span>
              <span class="aMini"><span class="dot"></span> Eri≈üilebilir</span>
            </div>
          </div>

          <div class="aCard">
            <h3>üß≠ Misyon</h3>
            <p>
              √úr√ºnleri sade ve anla≈üƒ±lƒ±r bir dille sunmak; ≈üeffaf, m√º≈üteri odaklƒ±
              bir ileti≈üim kurmak.
            </p>
            <div class="aMiniRow">
              <span class="aMini"><span class="dot"></span> ≈ûeffaflƒ±k</span>
              <span class="aMini"><span class="dot"></span> M√º≈üteri odaklƒ±</span>
              <span class="aMini"><span class="dot"></span> G√ºven</span>
            </div>
          </div>

          <div class="aCard">
            <h3>üõ°Ô∏è Kalite S√∂z√º</h3>
            <p>
              Femud‚Äôda hedef; g√ºven, s√ºreklilik ve memnuniyettir.
              Kupon/√∂d√ºl s√ºre√ßleri nettir.
            </p>
            <div class="aMiniRow">
              <span class="aMini"><span class="dot"></span> Net s√ºre√ß</span>
              <span class="aMini"><span class="dot"></span> Memnuniyet</span>
              <span class="aMini"><span class="dot"></span> S√ºreklilik</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <footer>
      ¬© <b>FEMUD</b> ‚Ä¢ Kupon i√ßin ekran g√∂r√ºnt√ºs√º ile <b>@Femud_tr</b> DM
    </footer>
  </div><!-- /wrap #oyunlar -->

  <!-- SAƒû ALT HIZLI ƒ∞LETƒ∞≈ûƒ∞M -->
  <div class="quickFloat" id="femudQuickContact">
    <a class="qBtn primary" href="https://instagram.com/femud_tr" target="_blank" rel="noopener">
      <span class="ico">üì©</span>
      <span>
        <strong>Instagram DM</strong>
        <small>@Femud_tr</small>
      </span>
    </a>

    <!-- WhatsApp numarasƒ±: a≈üaƒüƒ±daki JS‚Äôde WHATSAPP_NUMBER girince aktif olur -->
    <a class="qBtn" href="javascript:void(0)" id="femudWhatsAppBtn">
      <span class="ico">üí¨</span>
      <span>
        <strong>WhatsApp</strong>
        <small>Numara eklenince aktif</small>
      </span>
    </a>
  </div>

  <script>
    /* ===== OYUN LINKLERƒ∞ ===== */
    const CARK_LINK = "carkifelek.html";
    const KAZI_LINK = "kazikazan4x4.html";

    const btnCark = document.getElementById("btnCark");
    const btnKazi = document.getElementById("btnKazi");

    if(btnCark){ btnCark.setAttribute("href", CARK_LINK); btnCark.addEventListener("click", (e)=>{ e.preventDefault(); location.href = CARK_LINK; }); }
    if(btnKazi){ btnKazi.setAttribute("href", KAZI_LINK); btnKazi.addEventListener("click", (e)=>{ e.preventDefault(); location.href = KAZI_LINK; }); }

    /* 5 DK GERƒ∞ SAYIM + BUTON */
    const REFRESH_SEC = 300;
    let remaining = REFRESH_SEC;

    function nowTR(){
      return new Date().toLocaleString("tr-TR", {dateStyle:"short", timeStyle:"medium"});
    }
    function fmt(sec){
      const m = String(Math.floor(sec/60)).padStart(2,"0");
      const s = String(sec%60).padStart(2,"0");
      return `${m}:${s}`;
    }
    function renderStatus(){
      const last = localStorage.getItem("femud_last_refresh") || nowTR();
      const el = document.getElementById("statusBox");
      if(el){
        el.textContent = `Son g√ºncelleme: ${last} ‚Ä¢ Otomatik yenileme: ${fmt(remaining)}`;
      }
    }
    function hardRefresh(){
      localStorage.setItem("femud_last_refresh", nowTR());
      location.reload();
    }

    const refreshBtn = document.getElementById("refreshBtn");
    if(refreshBtn) refreshBtn.addEventListener("click", hardRefresh);

    const scrollGamesBtn = document.getElementById("scrollGames");
    if(scrollGamesBtn) scrollGamesBtn.addEventListener("click", ()=>{
      const el = document.getElementById("oyunlar");
      if(el) el.scrollIntoView({behavior:"smooth"});
    });

    if(!localStorage.getItem("femud_last_refresh")){
      localStorage.setItem("femud_last_refresh", nowTR());
    }
    renderStatus();
    setInterval(()=>{
      remaining = Math.max(0, remaining-1);
      renderStatus();
      if(remaining===0){
        localStorage.setItem("femud_last_refresh", nowTR());
        location.reload();
      }
    },1000);
  </script>

  <script>
  (function(){
    /* ========= YARDIMCI: PROXY FETCH (allorigins ‚Üí jina.ai) ========= */
    const _fetch = window.fetch.bind(window);
    function allOriginsRaw(url){ return "https://api.allorigins.win/raw?url=" + encodeURIComponent(url); }
    function jinaWrap(url){
      try{
        const cleaned = url.replace(/^https?:\/\//,"");
        return "https://r.jina.ai/http://" + cleaned;
      }catch(_){ return null; }
    }
    async function fetchViaProxy(url){
      // 1) allorigins
      try{
        const r1 = await _fetch(allOriginsRaw(url), {cache:"no-store"});
        if(r1 && r1.ok) return await r1.text();
      }catch(_){}
      // 2) jina.ai fallback
      const j = jinaWrap(url);
      if(j){
        const r2 = await _fetch(j, {cache:"no-store"});
        if(r2 && r2.ok) return await r2.text();
      }
      throw new Error("proxy fetch failed");
    }

    function tryNumber(txt){
      const s = String(txt || "").replace(/\s/g,"");
      const m = s.match(/(\d{1,3}(\.\d{3})*|\d+)(,\d+)?/);
      if(!m) return null;
      const t = m[0].replace(/\./g,"").replace(",",".");
      const v = Number(t);
      return Number.isFinite(v) ? v : null;
    }
    function formatTL(v){
      return Number(v).toLocaleString("tr-TR",{minimumFractionDigits:2,maximumFractionDigits:2})+" ‚Ç∫";
    }
    function stampTR(){
      return new Date().toLocaleString("tr-TR", {dateStyle:"short", timeStyle:"short"});
    }

    /* ========= WHATSAPP AKTƒ∞F ========= */
    const WHATSAPP_NUMBER = ""; // √∂rnek: 905551112233
    const waBtn = document.getElementById("femudWhatsAppBtn");
    if(waBtn){
      if(WHATSAPP_NUMBER && /^\d{10,15}$/.test(WHATSAPP_NUMBER)){
        const msg = encodeURIComponent("Merhaba, Femud √ºr√ºnleri hakkƒ±nda bilgi almak istiyorum.");
        waBtn.href = `https://wa.me/${WHATSAPP_NUMBER}?text=${msg}`;
        waBtn.target = "_blank";
        waBtn.rel = "noopener";
        const small = waBtn.querySelector("small");
        if(small) small.textContent = "Mesaj g√∂nder";
      }else{
        waBtn.addEventListener("click", ()=> alert("WhatsApp numarasƒ± eklenmedi. Kodda WHATSAPP_NUMBER alanƒ±na numara yaz."));
      }
    }

    /* ========= MODAL ========= */
    const MODAL = document.getElementById("femudNewsModal");
    const FRAME = document.getElementById("femudModalFrame");
    const TITLE = document.getElementById("femudModalTitle");
    const CLOSE = document.getElementById("femudModalClose");
    const NEWTAB = document.getElementById("femudOpenNewTab");

    function openModal(url, title){
      if(!MODAL || !FRAME){ window.open(url, "_blank"); return; }
      if(TITLE) TITLE.textContent = title || "Haber";
      FRAME.src = url;
      MODAL.classList.add("open");
      MODAL.setAttribute("aria-hidden","false");
      document.body.classList.add("modalLock");
    }
    function closeModal(){
      if(!MODAL || !FRAME) return;
      MODAL.classList.remove("open");
      MODAL.setAttribute("aria-hidden","true");
      FRAME.src = "about:blank";
      document.body.classList.remove("modalLock");
    }
    if(CLOSE) CLOSE.addEventListener("click", closeModal);
    if(MODAL) MODAL.addEventListener("click", (e)=>{ if(e.target===MODAL) closeModal(); });
    window.addEventListener("keydown", (e)=>{ if(e.key==="Escape") closeModal(); });
    if(NEWTAB) NEWTAB.addEventListener("click", ()=>{
      const url = FRAME?.src;
      if(url && url !== "about:blank") window.open(url, "_blank", "noopener");
      else alert("Baƒülantƒ± hen√ºz y√ºklenmedi.");
    });

<!-- =========================
     ALTIN + HABERLER (CORS FIX + MODAL)
     Eski altƒ±n/haber bloklarƒ±nƒ± silip bunu ekle.
     ========================= -->

<style>
  /* GOLD */
  .goldTopBar{
    margin-top:12px;
    border-radius:16px;
    border:1px solid rgba(255,255,255,.14);
    background: rgba(255,255,255,.06);
    box-shadow: var(--shadow2);
    padding:10px 12px;
    display:flex; flex-wrap:wrap; gap:10px;
    align-items:center; justify-content:space-between;
  }
  .goldCtlRow{ display:flex; flex-wrap:wrap; gap:8px; align-items:center; }
  .goldCtlBtn{
    appearance:none; border:none; cursor:pointer;
    padding:8px 10px; border-radius:12px;
    font-weight:950; font-size:12px;
    color:var(--txt);
    background: rgba(255,255,255,.08);
    border:1px solid rgba(255,255,255,.14);
  }
  .goldCtlBtn.active{
    background: linear-gradient(135deg, rgba(102,214,255,.18), rgba(124,77,255,.16));
    border-color: rgba(102,214,255,.35);
  }
  .goldHint{
    color: rgba(234,242,255,.78);
    font-weight:850;
    font-size:12px;
  }
  .goldGrid{
    margin-top:12px;
    display:grid;
    grid-template-columns: 1fr;
    gap:12px;
  }
  @media(min-width:900px){ .goldGrid{ grid-template-columns: 1fr 1fr 1fr; } }
  .goldCard{
    border-radius: calc(var(--r) + 10px);
    border:1px solid var(--stroke);
    background: rgba(255,255,255,.06);
    box-shadow: var(--shadow);
    overflow:hidden;
  }
  .goldHead{
    padding:12px 12px;
    border-bottom:1px solid var(--stroke);
    background: rgba(255,255,255,.04);
    display:flex;align-items:center;justify-content:space-between;gap:10px;
  }
  .goldHead b{font-size:13px;font-weight:980;letter-spacing:.2px}
  .goldPill{
    font-size:11.5px;font-weight:950;
    padding:6px 9px;border-radius:999px;
    border:1px solid rgba(255,255,255,.14);
    background: rgba(0,0,0,.18);
    color: rgba(234,242,255,.92);
    white-space:nowrap;
  }
  .goldBody{ padding:12px 12px 12px; }
  .goldPriceRow{ display:flex; align-items:flex-end; justify-content:space-between; gap:12px; }
  .goldPrice{ font-size:22px; font-weight:990; letter-spacing:.2px; color:#fff; line-height:1.15; }
  .goldDeltaBox{ text-align:right; min-width: 160px; }
  .goldDelta{
    font-size:13px; font-weight:950; letter-spacing:.2px;
    padding:7px 9px; border-radius:12px;
    border:1px solid rgba(255,255,255,.14);
    background: rgba(0,0,0,.18);
    display:inline-block;
  }
  .up{ color:#8bffb0; }
  .down{ color:#ff9aa6; }
  .flat{ color: rgba(234,242,255,.80); }

  .goldSparkWrap{
    margin-top:10px;
    border-radius:14px;
    border:1px solid rgba(255,255,255,.12);
    background: rgba(0,0,0,.16);
    padding:8px;
    overflow:hidden;
  }
  .goldSpark{ width:100%; height:44px; display:block; }

  .goldMeta{
    margin-top:10px;
    font-size:12px;
    font-weight:850;
    color: rgba(234,242,255,.78);
    line-height:1.45;
    display:flex; justify-content:space-between; gap:10px; flex-wrap:wrap;
  }

  /* NEWS */
  .newsList{ display:flex; flex-direction:column; gap:10px; }
  .newsItem{
    border-radius:16px;
    border:1px solid rgba(255,255,255,.14);
    background: rgba(255,255,255,.06);
    padding:12px 12px;
    box-shadow: var(--shadow2);
  }
  .newsTitle{
    margin:0;
    font-size:14px;
    font-weight:980;
    color:#fff;
    line-height:1.35;
    cursor:pointer;
  }
  .newsTitle:hover{ text-decoration: underline; }
  .newsMeta{
    margin-top:6px;
    display:flex; gap:10px; flex-wrap:wrap;
    color: rgba(234,242,255,.76);
    font-size:12px;
    font-weight:850;
  }

  /* MODAL */
  .modalBack{
    position:fixed; inset:0;
    background: rgba(0,0,0,.55);
    display:none;
    align-items:center;
    justify-content:center;
    z-index:9999;
    padding:14px;
  }
  .modalBox{
    width:min(980px, 96vw);
    height:min(86vh, 720px);
    border-radius:18px;
    border:1px solid rgba(255,255,255,.18);
    background: rgba(10,14,25,.95);
    box-shadow: 0 25px 70px rgba(0,0,0,.55);
    overflow:hidden;
    display:flex;
    flex-direction:column;
  }
  .modalTop{
    padding:10px 12px;
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:10px;
    border-bottom:1px solid rgba(255,255,255,.14);
    background: rgba(255,255,255,.06);
  }
  .modalTop b{ color:#fff; font-weight:980; font-size:13px; }
  .modalTop .modalBtns{ display:flex; gap:8px; }
  .mBtn{
    appearance:none;border:none;cursor:pointer;
    padding:8px 10px;border-radius:12px;
    font-weight:950;font-size:12px;
    color:#06131f;
    background: linear-gradient(135deg, var(--acc), #8cf7ff, #4cc7ff);
  }
  .mBtn.ghost{
    color: var(--txt);
    background: rgba(255,255,255,.08);
    border:1px solid rgba(255,255,255,.14);
  }
  .modalFrame{
    width:100%;
    height:100%;
    border:none;
    background:#fff;
  }
</style>

<!-- ===== ALTIN ===== -->
<div class="panel" id="altinPanel">
  <div class="panelHead">
    <h2>Altƒ±n (Anlƒ±k)</h2>
    <p>Gram ‚Ä¢ √áeyrek ‚Ä¢ Tam ‚Äî +/-% ve mini grafik (bilgilendirme ama√ßlƒ±dƒ±r)</p>
  </div>
  <div class="panelBody">

    <div class="goldTopBar">
      <div class="goldCtlRow" id="goldRangeBtns">
        <button class="goldCtlBtn active" type="button" data-range="10m">10 dk</button>
        <button class="goldCtlBtn" type="button" data-range="1h">1 saat</button>
        <button class="goldCtlBtn" type="button" data-range="1d">1 g√ºn</button>
      </div>

      <div class="goldCtlRow" id="goldPrimeBtns">
        <!-- Etiketsiz: A=primli, B=primsiz -->
        <button class="goldCtlBtn active" type="button" data-prime="A">A</button>
        <button class="goldCtlBtn" type="button" data-prime="B">B</button>
      </div>

      <div class="goldHint" id="goldHint">Baƒülantƒ± kontrol ediliyor‚Ä¶</div>
    </div>

    <div class="goldGrid" id="goldPanels">
      <div class="goldCard">
        <div class="goldHead"><b>ü™ô Gram Altƒ±n</b><span class="goldPill">‚Ç∫ / gr</span></div>
        <div class="goldBody">
          <div class="goldPriceRow">
            <div class="goldPrice" id="gold_gram_price">-</div>
            <div class="goldDeltaBox"><div class="goldDelta flat" id="gold_gram_delta">-</div></div>
          </div>
          <div class="goldSparkWrap"><canvas class="goldSpark" id="spark_gram" width="600" height="44"></canvas></div>
          <div class="goldMeta">
            <span id="gold_gram_src">Kaynak: -</span>
            <span id="gold_gram_hl">H: - ‚Ä¢ L: -</span>
            <span id="gold_gram_time">-</span>
          </div>
        </div>
      </div>

      <div class="goldCard">
        <div class="goldHead"><b>ü™ô √áeyrek Altƒ±n</b><span class="goldPill">‚Ç∫</span></div>
        <div class="goldBody">
          <div class="goldPriceRow">
            <div class="goldPrice" id="gold_cey_price">-</div>
            <div class="goldDeltaBox"><div class="goldDelta flat" id="gold_cey_delta">-</div></div>
          </div>
          <div class="goldSparkWrap"><canvas class="goldSpark" id="spark_cey" width="600" height="44"></canvas></div>
          <div class="goldMeta">
            <span id="gold_cey_src">Kaynak: -</span>
            <span id="gold_cey_hl">H: - ‚Ä¢ L: -</span>
            <span id="gold_cey_time">-</span>
          </div>
        </div>
      </div>

      <div class="goldCard">
        <div class="goldHead"><b>ü™ô Tam Altƒ±n</b><span class="goldPill">‚Ç∫</span></div>
        <div class="goldBody">
          <div class="goldPriceRow">
            <div class="goldPrice" id="gold_tam_price">-</div>
            <div class="goldDeltaBox"><div class="goldDelta flat" id="gold_tam_delta">-</div></div>
          </div>
          <div class="goldSparkWrap"><canvas class="goldSpark" id="spark_tam" width="600" height="44"></canvas></div>
          <div class="goldMeta">
            <span id="gold_tam_src">Kaynak: -</span>
            <span id="gold_tam_hl">H: - ‚Ä¢ L: -</span>
            <span id="gold_tam_time">-</span>
          </div>
        </div>
      </div>
    </div>

    <div class="disclaimer">
      <b>Not:</b> Veriler kaynaklara g√∂re k√º√ß√ºk fark g√∂sterebilir. Yatƒ±rƒ±m tavsiyesi deƒüildir.
    </div>
  </div>
</div>

<!-- ===== HABERLER ===== -->
<div class="panel" id="haberPanel">
  <div class="panelHead">
    <h2>D√ºnya G√ºndemi (Ekonomi & Piyasa)</h2>
    <p>En az 10 haber ‚Ä¢ 12 saatte bir g√ºncellenir ‚Ä¢ Ba≈ülƒ±ƒüa tƒ±klayƒ±nca sayfa kapanmadan a√ßƒ±lƒ±r</p>
  </div>
  <div class="panelBody">
    <div class="newsList" id="newsList">
      <div class="miniNote">Haberler y√ºkleniyor‚Ä¶</div>
    </div>
  </div>
</div>

<!-- ===== MODAL (Haber A√ßma) ===== -->
<div class="modalBack" id="newsModalBack">
  <div class="modalBox">
    <div class="modalTop">
      <b id="newsModalTitle">Haber</b>
      <div class="modalBtns">
        <button class="mBtn ghost" id="openNewTabBtn" type="button">Yeni Sekme</button>
        <button class="mBtn" id="closeModalBtn" type="button">Kapat</button>
      </div>
    </div>
    <iframe class="modalFrame" id="newsFrame" src="about:blank" title="Haber"></iframe>
  </div>
</div>

<script>
/* =========================
   CORS √á√ñZ√úM√ú + ALTIN + HABERLER
   ========================= */

const PROXY_RAW = (u)=> `https://api.allorigins.win/raw?url=${encodeURIComponent(u)}`;

async function fetchTextCors(url){
  // 1) Direkt dene (bazƒ± kaynaklar izin verir)
  try{
    const r = await fetch(url, {cache:"no-store"});
    if(r.ok) return await r.text();
  }catch(e){}

  // 2) AllOrigins (CORS proxy)
  const r2 = await fetch(PROXY_RAW(url), {cache:"no-store"});
  if(!r2.ok) throw new Error("Proxy alƒ±namadƒ±");
  return await r2.text();
}
async function fetchJSONCors(url){
  const txt = await fetchTextCors(url);
  return JSON.parse(txt);
}

/* =========================
   ALTIN
   ========================= */
const GOLD = {
  PRIME: { gram: 0.055, ceyrek: 0.105, tam: 0.095 }, // A modu
  TROY_OZ_TO_GRAM: 31.1034768,
  CEY_SAF_EQ_GR: 1.604,
  TAM_SAF_EQ_GR: 6.60,
  REFRESH_MS: 30000,
  KEEP_DAYS: 2,
  STORE_KEY: "femud_gold_series_v3",
  UI: { range: "10m", primeMode: "A" }
};

function tl(x){
  try{
    return new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY",maximumFractionDigits:2}).format(x);
  }catch(_){
    return (Math.round(x*100)/100).toFixed(2) + " ‚Ç∫";
  }
}
function stamp(){
  return new Date().toLocaleString("tr-TR", {dateStyle:"short", timeStyle:"medium"});
}
function applyPrime(v, pct){ return v * (1 + pct); }

function loadSeries(){
  try{
    const s = JSON.parse(localStorage.getItem(GOLD.STORE_KEY) || "null");
    if(!s || !Array.isArray(s.points)) return { points: [] };
    return s;
  }catch(_){ return { points: [] }; }
}
function saveSeries(series){ try{ localStorage.setItem(GOLD.STORE_KEY, JSON.stringify(series)); }catch(_){} }
function pruneSeries(series){
  const cutoff = Date.now() - GOLD.KEEP_DAYS*24*60*60*1000;
  series.points = series.points.filter(p => p.t >= cutoff);
}
function rangeToMs(r){
  if(r==="10m") return 10*60*1000;
  if(r==="1h")  return 60*60*1000;
  return 24*60*60*1000;
}
function findLookbackValue(points, key, lookbackMs){
  const target = Date.now() - lookbackMs;
  let best = null;
  for(let i=points.length-1; i>=0; i--){
    const p = points[i];
    if(p.t <= target){ best = p[key]; break; }
  }
  if(best==null && points.length) best = points[0][key];
  return best;
}
function setHL(kind, hi, lo){
  const el = document.getElementById(`gold_${kind}_hl`);
  if(!el) return;
  if(hi==null || lo==null || !isFinite(hi) || !isFinite(lo)){
    el.textContent = "H: - ‚Ä¢ L: -";
    return;
  }
  el.textContent = `H: ${tl(hi)} ‚Ä¢ L: ${tl(lo)}`;
}
function computeHL(points, key, ms){
  const cutoff = Date.now() - ms;
  const arr = points.filter(p => p.t >= cutoff).map(p => p[key]).filter(v => isFinite(v));
  if(!arr.length) return {hi:null, lo:null};
  let hi = -Infinity, lo = Infinity;
  for(const v of arr){ if(v>hi) hi=v; if(v<lo) lo=v; }
  return {hi, lo};
}

function drawSpark(canvasId, values){
  const c = document.getElementById(canvasId);
  if(!c) return;
  const ctx = c.getContext("2d");
  const w = c.width, h = c.height;
  ctx.clearRect(0,0,w,h);

  if(!values || values.length < 2){
    ctx.globalAlpha = 0.35;
    ctx.strokeStyle = "#ffffff";
    ctx.beginPath(); ctx.moveTo(0, h/2); ctx.lineTo(w, h/2); ctx.stroke();
    ctx.globalAlpha = 1;
    return;
  }

  let min = Infinity, max = -Infinity;
  for(const v of values){ if(v<min) min=v; if(v>max) max=v; }
  const span = (max-min) || 1;

  ctx.globalAlpha = 0.20;
  ctx.strokeStyle = "#ffffff";
  ctx.beginPath(); ctx.moveTo(0, h-1); ctx.lineTo(w, h-1); ctx.stroke();
  ctx.globalAlpha = 1;

  ctx.lineWidth = 2;
  ctx.strokeStyle = "#ffffff";
  ctx.beginPath();
  values.forEach((v,i)=>{
    const x = (i/(values.length-1)) * (w-2) + 1;
    const y = h - ((v-min)/span)*(h-6) - 3;
    if(i===0) ctx.moveTo(x,y); else ctx.lineTo(x,y);
  });
  ctx.stroke();

  const lastV = values[values.length-1];
  const lastX = (w-2)+1;
  const lastY = h - ((lastV-min)/span)*(h-6) - 3;
  ctx.fillStyle="#ffffff";
  ctx.beginPath(); ctx.arc(lastX,lastY,2.8,0,Math.PI*2); ctx.fill();
}

function setDelta(el, now, prev){
  if(!el) return;
  if(prev==null || !isFinite(prev)){
    el.className = "goldDelta flat";
    el.textContent = "‚Äî";
    return;
  }
  const diff = now - prev;
  const pct = prev!==0 ? (diff/prev)*100 : 0;
  const arrow = diff>0 ? "‚ñ≤" : diff<0 ? "‚ñº" : "‚Ä¢";
  const cls = diff>0 ? "goldDelta up" : diff<0 ? "goldDelta down" : "goldDelta flat";
  el.className = cls;
  const sign = diff>0 ? "+" : diff<0 ? "" : "";
  el.textContent = `${arrow} ${sign}${tl(diff)}  (${sign}${pct.toFixed(2)}%)`;
}
function setRow(kind, price, prev, srcText){
  const pEl = document.getElementById(`gold_${kind}_price`);
  const dEl = document.getElementById(`gold_${kind}_delta`);
  const sEl = document.getElementById(`gold_${kind}_src`);
  const tEl = document.getElementById(`gold_${kind}_time`);
  if(pEl) pEl.textContent = tl(price);
  setDelta(dEl, price, prev);
  if(sEl) sEl.textContent = `Kaynak: ${srcText}`;
  if(tEl) tEl.textContent = stamp();
}

/* Kaynaklar:
   - USDTRY: open.er-api (CORS bazen ok, deƒüilse proxy ile)
   - XAUUSD: goldprice.org data-asg endpoint (proxy ile garanti)
*/
async function getUSDTRY(){
  const j = await fetchJSONCors("https://open.er-api.com/v6/latest/USD");
  const v = j?.rates?.TRY;
  if(!v) throw new Error("USDTRY yok");
  return Number(v);
}
async function getXAUUSD(){
  const j = await fetchJSONCors("https://data-asg.goldprice.org/dbXRates/USD");
  const x = j?.items?.[0]?.xauPrice;
  if(!x) throw new Error("XAUUSD yok");
  return Number(x);
}

async function updateGold(){
  const hint = document.getElementById("goldHint");
  const series = loadSeries();
  pruneSeries(series);

  try{
    if(hint) hint.textContent = "Veri √ßekiliyor‚Ä¶";

    const [usdtry, xauusd] = await Promise.all([getUSDTRY(), getXAUUSD()]);

    const gramUSD  = xauusd / GOLD.TROY_OZ_TO_GRAM;
    const gramSpot = gramUSD * usdtry;
    const ceySpot  = gramSpot * GOLD.CEY_SAF_EQ_GR;
    const tamSpot  = gramSpot * GOLD.TAM_SAF_EQ_GR;

    const usePrime = (GOLD.UI.primeMode === "A");
    const gram = usePrime ? applyPrime(gramSpot, GOLD.PRIME.gram) : gramSpot;
    const cey  = usePrime ? applyPrime(ceySpot,  GOLD.PRIME.ceyrek) : ceySpot;
    const tam  = usePrime ? applyPrime(tamSpot,  GOLD.PRIME.tam) : tamSpot;

    series.points.push({ t: Date.now(), gram, cey, tam });
    pruneSeries(series);
    saveSeries(series);

    const lookback = rangeToMs(GOLD.UI.range);
    const prevGram = findLookbackValue(series.points, "gram", lookback);
    const prevCey  = findLookbackValue(series.points, "cey",  lookback);
    const prevTam  = findLookbackValue(series.points, "tam",  lookback);

    setRow("gram", gram, prevGram, "XAUUSD + USDTRY");
    setRow("cey",  cey,  prevCey,  "Gram bazlƒ±");
    setRow("tam",  tam,  prevTam,  "Gram bazlƒ±");

    const oneDay = 24*60*60*1000;
    const hlG = computeHL(series.points, "gram", oneDay);
    const hlC = computeHL(series.points, "cey",  oneDay);
    const hlT = computeHL(series.points, "tam",  oneDay);
    setHL("gram", hlG.hi, hlG.lo);
    setHL("cey",  hlC.hi, hlC.lo);
    setHL("tam",  hlT.hi, hlT.lo);

    const cutoff = Date.now() - lookback;
    const windowPts = series.points.filter(p => p.t >= cutoff);
    drawSpark("spark_gram", windowPts.map(p=>p.gram));
    drawSpark("spark_cey",  windowPts.map(p=>p.cey));
    drawSpark("spark_tam",  windowPts.map(p=>p.tam));

    if(hint){
      const rr = GOLD.UI.range==="10m" ? "10 dk" : GOLD.UI.range==="1h" ? "1 saat" : "1 g√ºn";
      hint.textContent = `Anlƒ±k g√ºncelleme ‚Ä¢ +/-% (${rr})`;
    }
  }catch(e){
    // Cache g√∂ster
    const last = loadSeries().points;
    if(last && last.length){
      const p = last[last.length-1];
      setRow("gram", p.gram, null, "Cache");
      setRow("cey",  p.cey,  null, "Cache");
      setRow("tam",  p.tam,  null, "Cache");

      const oneDay = 24*60*60*1000;
      const hlG = computeHL(last, "gram", oneDay);
      const hlC = computeHL(last, "cey",  oneDay);
      const hlT = computeHL(last, "tam",  oneDay);
      setHL("gram", hlG.hi, hlG.lo);
      setHL("cey",  hlC.hi, hlC.lo);
      setHL("tam",  hlT.hi, hlT.lo);

      drawSpark("spark_gram", last.slice(-30).map(x=>x.gram));
      drawSpark("spark_cey",  last.slice(-30).map(x=>x.cey));
      drawSpark("spark_tam",  last.slice(-30).map(x=>x.tam));

      if(hint) hint.textContent = "Baƒülantƒ± kƒ±sƒ±tlƒ± ‚Ä¢ Cache g√∂steriliyor";
    }else{
      if(hint) hint.textContent = "Altƒ±n verisi alƒ±namadƒ± (baƒülantƒ±/engel)";
    }
  }
}

// Gold UI
(function initGoldUI(){
  const rBtns = document.querySelectorAll("#goldRangeBtns .goldCtlBtn[data-range]");
  rBtns.forEach(b=>{
    b.addEventListener("click", ()=>{
      GOLD.UI.range = b.getAttribute("data-range");
      rBtns.forEach(x=>x.classList.toggle("active", x===b));
      localStorage.setItem("femud_gold_range", GOLD.UI.range);
      updateGold();
    });
  });

  const pBtns = document.querySelectorAll("#goldPrimeBtns .goldCtlBtn[data-prime]");
  pBtns.forEach(b=>{
    b.addEventListener("click", ()=>{
      GOLD.UI.primeMode = b.getAttribute("data-prime");
      pBtns.forEach(x=>x.classList.toggle("active", x===b));
      localStorage.setItem("femud_gold_primeMode", GOLD.UI.primeMode);
      updateGold();
    });
  });

  const savedRange = localStorage.getItem("femud_gold_range");
  const savedPrime = localStorage.getItem("femud_gold_primeMode");
  if(savedRange){ GOLD.UI.range = savedRange; rBtns.forEach(x=>x.classList.toggle("active", x.getAttribute("data-range")===savedRange)); }
  if(savedPrime){ GOLD.UI.primeMode = savedPrime; pBtns.forEach(x=>x.classList.toggle("active", x.getAttribute("data-prime")===savedPrime)); }
})();

/* =========================
   HABERLER (Google News RSS -> proxy -> XML parse)
   ========================= */
const NEWS = {
  RSS: "https://news.google.com/rss/search?q=ekonomi%20piyasa%20d%C3%BCnya%20OR%20borsa%20OR%20enflasyon%20OR%20faiz&hl=tr&gl=TR&ceid=TR:tr",
  STORE_KEY: "femud_news_cache_v1",
  REFRESH_MS: 12 * 60 * 60 * 1000, // 12 saat
  MAX: 10
};

function parseRssDate(d){
  try{ return new Date(d).toLocaleString("tr-TR",{dateStyle:"short", timeStyle:"short"}); }catch(_){ return d || "-"; }
}
function stripHtml(s){ return (s||"").replace(/<[^>]*>/g,"").trim(); }

async function fetchNews(){
  const box = document.getElementById("newsList");
  if(!box) return;

  // cache kontrol (12 saat)
  try{
    const cached = JSON.parse(localStorage.getItem(NEWS.STORE_KEY) || "null");
    if(cached && cached.t && (Date.now()-cached.t) < NEWS.REFRESH_MS && Array.isArray(cached.items) && cached.items.length){
      renderNews(cached.items);
      return;
    }
  }catch(_){}

  box.innerHTML = `<div class="miniNote">Haberler g√ºncelleniyor‚Ä¶</div>`;

  try{
    const xmlText = await fetchTextCors(NEWS.RSS);
    const xml = new DOMParser().parseFromString(xmlText, "text/xml");
    const items = Array.from(xml.querySelectorAll("item")).slice(0, NEWS.MAX).map(it=>{
      const titleRaw = it.querySelector("title")?.textContent || "";
      // Google News title genelde "Ba≈ülƒ±k - Kaynak" gibi gelir
      let title = titleRaw;
      let source = "";
      if(titleRaw.includes(" - ")){
        const parts = titleRaw.split(" - ");
        title = parts.slice(0,-1).join(" - ").trim();
        source = parts[parts.length-1].trim();
      }
      const link = it.querySelector("link")?.textContent || "";
      const pubDate = it.querySelector("pubDate")?.textContent || "";
      return {
        title: stripHtml(title),
        source: stripHtml(source || "Google News"),
        date: parseRssDate(pubDate),
        link
      };
    });

    localStorage.setItem(NEWS.STORE_KEY, JSON.stringify({t: Date.now(), items}));
    renderNews(items);
  }catch(e){
    // cache varsa g√∂ster
    try{
      const cached = JSON.parse(localStorage.getItem(NEWS.STORE_KEY) || "null");
      if(cached?.items?.length){
        renderNews(cached.items);
        return;
      }
    }catch(_){}
    box.innerHTML = `<div class="miniNote">Haber alƒ±namadƒ± (baƒülantƒ±/engel).</div>`;
  }
}

function renderNews(items){
  const box = document.getElementById("newsList");
  if(!box) return;
  box.innerHTML = "";
  items.forEach((n, idx)=>{
    const div = document.createElement("div");
    div.className = "newsItem";
    div.innerHTML = `
      <p class="newsTitle" data-link="${encodeURIComponent(n.link)}">${idx+1}. ${n.title}</p>
      <div class="newsMeta">
        <span>${n.source}</span>
        <span>‚Ä¢</span>
        <span>${n.date}</span>
      </div>
    `;
    box.appendChild(div);
  });

  box.querySelectorAll(".newsTitle").forEach(el=>{
    el.addEventListener("click", ()=>{
      const link = decodeURIComponent(el.getAttribute("data-link") || "");
      openNewsModal(el.textContent || "Haber", link);
    });
  });
}

/* Modal open */
const modalBack = document.getElementById("newsModalBack");
const modalTitle = document.getElementById("newsModalTitle");
const newsFrame = document.getElementById("newsFrame");
const closeModalBtn = document.getElementById("closeModalBtn");
const openNewTabBtn = document.getElementById("openNewTabBtn");
let currentNewsUrl = "";

function openNewsModal(title, url){
  currentNewsUrl = url;
  if(modalTitle) modalTitle.textContent = (title||"Haber").slice(0,110);
  if(newsFrame) newsFrame.src = url;
  if(modalBack) modalBack.style.display = "flex";
}
function closeNewsModal(){
  if(modalBack) modalBack.style.display = "none";
  if(newsFrame) newsFrame.src = "about:blank";
  currentNewsUrl = "";
}

if(closeModalBtn) closeModalBtn.addEventListener("click", closeNewsModal);
if(modalBack) modalBack.addEventListener("click", (e)=>{ if(e.target === modalBack) closeNewsModal(); });
if(openNewTabBtn) openNewTabBtn.addEventListener("click", ()=>{ if(currentNewsUrl) window.open(currentNewsUrl, "_blank"); });

/* Ba≈ülat */
updateGold();
setInterval(updateGold, GOLD.REFRESH_MS);

fetchNews();
setInterval(fetchNews, 30*60*1000); // listeyi 30dk'da bir dene ama cache 12 saatte yenilenir
</script>