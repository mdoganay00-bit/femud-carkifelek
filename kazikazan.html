<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Femud KazÄ± Kazan</title>

    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            min-height: 100vh;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            display: flex;
            align-items: center;
            justify-content: center;
            background: radial-gradient(circle at top, #1f2937, #020617);
            color: #fff;
        }

        .shell {
            width: 100%;
            max-width: 480px;
            padding: 18px;
        }

        .panel {
            background: radial-gradient(circle at top left, rgba(255, 215, 0, 0.08), transparent 55%),
                        radial-gradient(circle at bottom right, rgba(96, 165, 250, 0.08), transparent 55%),
                        #020617;
            border-radius: 20px;
            padding: 20px 18px 16px;
            border: 1px solid rgba(148, 163, 184, 0.35);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.7);
            position: relative;
            overflow: hidden;
        }

        .panel::before {
            content: "";
            position: absolute;
            inset: -40%;
            background: conic-gradient(from 140deg, #fde047, #f97316, #38bdf8, #a855f7, #fde047);
            opacity: 0.12;
            filter: blur(40px);
            z-index: 0;
        }

        .panel-inner {
            position: relative;
            z-index: 1;
        }

        .header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 14px;
        }

        .logo-block {
            display: flex;
            flex-direction: column;
            gap: 3px;
        }

        .logo-text {
            font-size: 1.3rem;
            letter-spacing: 0.12em;
            font-weight: 800;
        }

        .sub-text {
            font-size: 0.8rem;
            opacity: 0.8;
        }

        .badge {
            font-size: 0.75rem;
            padding: 4px 9px;
            border-radius: 999px;
            border: 1px solid rgba(248, 250, 252, 0.4);
            background: rgba(15, 23, 42, 0.9);
        }

        .highlight {
            margin-bottom: 10px;
            font-size: 0.86rem;
            opacity: 0.92;
        }

        .highlight strong {
            color: #facc15;
        }

        .card-area {
            margin-top: 6px;
            background: linear-gradient(135deg, #020617, #020617);
            border-radius: 18px;
            padding: 12px;
            border: 1px solid rgba(148, 163, 184, 0.45);
        }

        .card-top {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.8rem;
        }

        .card-top span {
            opacity: 0.9;
        }

        .remaining {
            font-weight: 600;
        }

        .scratch-card {
            position: relative;
            height: 135px;
            border-radius: 16px;
            overflow: hidden;
            background: radial-gradient(circle at top, #020617, #020617);
            border: 1px solid rgba(15, 23, 42, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .result-text {
            font-size: 1.4rem;
            font-weight: 800;
            text-align: center;
            padding: 0 10px;
            line-height: 1.3;
        }

        .result-text.win {
            color: #facc15;
            text-shadow: 0 0 14px rgba(250, 204, 21, 0.5);
        }

        .result-text.lose {
            color: #e5e7eb;
            opacity: 0.9;
        }

        .overlay {
            position: absolute;
            inset: 0;
            background:
                radial-gradient(circle at top, rgba(209, 213, 219, 0.95), rgba(148, 163, 184, 0.95));
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: #020617;
            cursor: pointer;
            transition: opacity 0.28s ease;
        }

        .overlay-main {
            font-weight: 800;
            font-size: 1.05rem;
            margin-bottom: 4px;
            letter-spacing: 0.12em;
        }

        .overlay-sub {
            font-size: 0.74rem;
            opacity: 0.9;
        }

        .scratch-card.revealed .overlay {
            opacity: 0;
            pointer-events: none;
        }

        .stats-grid {
            margin-top: 10px;
            display: grid;
            grid-template-columns: repeat(3, minmax(0, 1fr));
            gap: 6px;
            font-size: 0.75rem;
        }

        .stat-item {
            background: rgba(15, 23, 42, 0.9);
            border-radius: 10px;
            padding: 7px 8px;
            border: 1px solid rgba(148, 163, 184, 0.4);
        }

        .stat-label {
            opacity: 0.78;
        }

        .stat-value {
            font-weight: 600;
            margin-top: 2px;
        }

        .prize-row {
            margin-top: 12px;
            padding-top: 10px;
            border-top: 1px dashed rgba(148, 163, 184, 0.6);
            font-size: 0.78rem;
            display: flex;
            justify-content: space-between;
            gap: 8px;
            flex-wrap: wrap;
        }

        .prize-chip {
            padding: 4px 8px;
            border-radius: 999px;
            border: 1px solid rgba(248, 250, 252, 0.4);
            background: rgba(15, 23, 42, 0.9);
            white-space: nowrap;
        }

        .prize-chip span {
            font-weight: 600;
            color: #facc15;
        }

        .actions {
            margin-top: 16px;
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .btn-play {
            flex: 1;
            padding: 10px 14px;
            border-radius: 999px;
            border: none;
            font-size: 0.95rem;
            font-weight: 700;
            cursor: pointer;
            background: linear-gradient(135deg, #facc15, #f97316);
            color: #171717;
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.7);
            transition: transform 0.08s ease, box-shadow 0.08s ease, opacity 0.2s ease;
        }

        .btn-play:active {
            transform: translateY(1px);
            box-shadow: 0 6px 14px rgba(0, 0, 0, 0.8);
        }

        .btn-play.disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .info {
            font-size: 0.7rem;
            opacity: 0.8;
            text-align: right;
            line-height: 1.2;
        }

        .footer-note {
            margin-top: 8px;
            font-size: 0.68rem;
            opacity: 0.65;
            text-align: center;
        }

        @media (max-width: 480px) {
            .panel {
                padding: 18px 14px 14px;
            }
            .scratch-card {
                height: 125px;
            }
        }
    </style>
</head>
<body>
<div class="shell">
    <div class="panel">
        <div class="panel-inner">
            <div class="header">
                <div class="logo-block">
                    <div class="logo-text">FEMUD</div>
                    <div class="sub-text">KazÄ± Kazan KampanyasÄ±</div>
                </div>
                <div class="badge">AnÄ±nda Kazan â€¢ Online</div>
            </div>

            <div class="highlight">
                KartÄ± kazÄ± ve <strong>30 TL Â· 40 TL Â· 50 TL</strong> anÄ±nda kazanma ÅŸansÄ± yakala.  
                KazandÄ±ÄŸÄ±nda bilgiler <strong>otomatik olarak sisteme kaydedilir.</strong>
            </div>

            <div class="card-area">
                <div class="card-top">
                    <span>ÅžanslÄ± kartÄ±nÄ± seÃ§ ve kazÄ±</span>
                    <span class="remaining" id="remainingText">Kalan kart: -</span>
                </div>

                <div id="scratchCard" class="scratch-card">
                    <div id="resultText" class="result-text">
                        KartÄ± kazÄ±mak iÃ§in tÄ±kla
                    </div>
                    <div id="overlay" class="overlay">
                        <div class="overlay-main">KAZI KAZAN</div>
                        <div class="overlay-sub">ParmaÄŸÄ±nla / farenle tÄ±kla</div>
                    </div>
                </div>

                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-label">Toplam kazanÃ§</div>
                        <div class="stat-value" id="totalWin">0 TL</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">KazanÄ±lan kart</div>
                        <div class="stat-value" id="winCount">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">BoÅŸ kart</div>
                        <div class="stat-value" id="loseCount">0</div>
                    </div>
                </div>

                <div class="prize-row">
                    <div class="prize-chip"><span>30 TL</span> Ã¶dÃ¼l Â· 6 adet</div>
                    <div class="prize-chip"><span>40 TL</span> Ã¶dÃ¼l Â· 6 adet</div>
                    <div class="prize-chip"><span>50 TL</span> Ã¶dÃ¼l Â· 5 adet</div>
                </div>
            </div>

            <div class="actions">
                <button id="playButton" class="btn-play">KartÄ± KazÄ±</button>
                <div class="info">
                    KazanÄ±lan her kartta<br />bilgileriniz otomatik kaydedilir.
                </div>
            </div>

            <div class="footer-note">
                Not: Her mÃ¼ÅŸteri iÃ§in tek oturumda belirlenen kart sayÄ±sÄ± kullanÄ±lÄ±r.
            </div>
        </div>
    </div>
</div>

<script>
    // --- Ã–DÃœL HAVUZU AYARI ---
    // 30 TL: 6 adet, 40 TL: 6 adet, 50 TL: 5 adet, geri kalan: 0 (boÅŸ)
    const prizePool = [];

    for (let i = 0; i < 6; i++) prizePool.push(30);
    for (let i = 0; i < 6; i++) prizePool.push(40);
    for (let i = 0; i < 5; i++) prizePool.push(50);
    for (let i = 0; i < 43; i++) prizePool.push(0); // toplam 60 kart

    function shuffle(arr) {
        for (let i = arr.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [arr[i], arr[j]] = [arr[j], arr[i]];
        }
    }

    shuffle(prizePool);

    let currentIndex = 0;
    let totalWin = 0;
    let winCount = 0;
    let loseCount = 0;

    const remainingText = document.getElementById("remainingText");
    const resultText = document.getElementById("resultText");
    const scratchCard = document.getElementById("scratchCard");
    const overlay = document.getElementById("overlay");
    const playButton = document.getElementById("playButton");

    const totalWinEl = document.getElementById("totalWin");
    const winCountEl = document.getElementById("winCount");
    const loseCountEl = document.getElementById("loseCount");

    function updateRemaining() {
        const remaining = prizePool.length - currentIndex;
        remainingText.textContent = "Kalan kart: " + remaining;
        if (remaining <= 0) {
            playButton.classList.add("disabled");
        }
    }

    function updateStats() {
        totalWinEl.textContent = totalWin + " TL";
        winCountEl.textContent = winCount;
        loseCountEl.textContent = loseCount;
    }

    // ðŸ”´ BURASI Ã‡OK Ã–NEMLÄ°: Drive / sisteme kayÄ±t fonksiyonunun gireceÄŸi nokta
    function kaydetSisteme(prize) {
        // â­â­ SADECE ÅžUNU YAP: Eski Ã§alÄ±ÅŸan kodunda
        // "Ã¶dÃ¼l kazandÄ±ÄŸÄ±nda mÃ¼ÅŸteri sisteme dÃ¼ÅŸÃ¼yor" dediÄŸin
        // Drive / Sheets / Apps Script kodunu BURANIN Ä°Ã‡Ä°NE YAPIÅžTIR.

        // Ã–RNEK (SADECE GÃ–STERÄ°M, SÄ°LÄ°P KENDÄ° KODUNU KOYABÄ°LÄ°RSÄ°N):
        /*
        fetch('https://script.google.com/macros/s/...../exec', {
            method: 'POST',
            body: new FormData(document.getElementById('formId'))
        });
        */
    }

    function revealCard() {
        if (currentIndex >= prizePool.length) {
            resultText.textContent = "BugÃ¼n tÃ¼m kartlar kullanÄ±ldÄ±.";
            resultText.className = "result-text lose";
            scratchCard.classList.add("revealed");
            return;
        }

        const prize = prizePool[currentIndex];
        currentIndex++;

        scratchCard.classList.add("revealed");

        if (prize > 0) {
            totalWin += prize;
            winCount++;

            resultText.textContent = "Tebrikler! " + prize + " TL kazandÄ±n.";
            resultText.className = "result-text win";

            // âœ… KAZANILAN ANDA SÄ°STEME / DRIVEâ€™A KAYIT Ã‡AÄžRISI
            kaydetSisteme(prize);

        } else {
            loseCount++;
            resultText.textContent = "Bu kart boÅŸ. ÅžansÄ±nÄ± tekrar dene.";
            resultText.className = "result-text lose";
        }

        updateRemaining();
        updateStats();
    }

    function resetCardUI() {
        scratchCard.classList.remove("revealed");
    }

    function handlePlay() {
        if (currentIndex >= prizePool.length) return;
        resetCardUI();
        revealCard();
    }

    playButton.addEventListener("click", handlePlay);
    overlay.addEventListener("click", handlePlay);
    scratchCard.addEventListener("click", handlePlay);

    updateRemaining();
    updateStats();
</script>
</body>
</html>