<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Femud KazÄ± Kazan Premium</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  background: linear-gradient(145deg, #4a148c, #8e24aa);
  font-family: Poppins, sans-serif;
  color: white;
  text-align: center;
}

.container {
  margin-top: 20px;
}

h1 {
  font-size: 26px;
  font-weight: 800;
  margin-bottom: 10px;
}

.grid {
  width: 320px;
  height: 320px;
  margin: 20px auto;
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 6px;
}

.card {
  background: #ffffff;
  border-radius: 10px;
  overflow: hidden;
  cursor: pointer;
  position: relative;
  box-shadow: 0 4px 10px rgba(0,0,0,0.4);
}

.card img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.card.revealed {
  border: 3px solid gold;
}

.result-box {
  margin-top: 20px;
  padding: 15px;
  background: #ffffffdd;
  color: #4a148c;
  font-weight: 700;
  width: 90%;
  max-width: 340px;
  margin-left: auto;
  margin-right: auto;
  border-radius: 12px;
  box-shadow: 0 4px 20px rgba(0,0,0,0.4);
  display: none;
}

#claimBtn {
  margin-top: 10px;
  padding: 12px 20px;
  border: none;
  background: #d81b60;
  color: white;
  font-weight: 700;
  border-radius: 8px;
  cursor: pointer;
  width: 100%;
}
</style>
</head>

<body>
<div class="container">
  <h1>ğŸ Femud KazÄ± Kazan Premium</h1>
  <p>6 kutu aÃ§ â€“ 3 aynÄ± Ã¶dÃ¼lÃ¼ bul â€“ kazanmaya hak kazan!</p>

  <div class="grid" id="grid"></div>

  <div class="result-box" id="resultBox">
    <div id="resultText"></div>
    <button id="claimBtn">Hediyemi Talep Et</button>
  </div>
</div>

<script>
// =========================
// GOOGLE SHEET API AYARI
// =========================
const API_URL = "https://script.google.com/macros/s/AKfycbwxw3gTT1htqN3cuALPMdgSJm3213dIXG7TtJGChhMPLiIrLgg38TbuCTd_7GKobD1L/exec";

// =========================
// OYUN AYARLARI
// =========================
const rewards = ["50 TL", "40 TL", "30 TL"];
let rewardPool = [];

// HER OYUNDA KARMA Ã–DÃœL DAÄILIMI
function generatePool() {
  rewardPool = [];

  rewards.forEach(r => {
    for (let i = 0; i < 6; i++) rewardPool.push(r);
  });

  rewardPool.sort(() => Math.random() - 0.5);
}

// GRID OLUÅTURMA
const grid = document.getElementById("grid");

let opened = 0;
let revealedRewards = [];
let canPlay = true;

function buildGrid() {
  generatePool();
  grid.innerHTML = "";
  opened = 0;
  revealedRewards = [];
  canPlay = true;

  for (let i = 0; i < 25; i++) {
    const card = document.createElement("div");
    card.className = "card";
    card.dataset.reward = rewardPool[i];
    card.innerHTML = `<img src="femud_logo.png">`;

    card.addEventListener("click", () => revealCard(card));

    grid.appendChild(card);
  }
}

buildGrid();

// KART AÃ‡MA
function revealCard(card) {
  if (!canPlay) return;
  if (card.classList.contains("revealed")) return;
  if (opened >= 6) return;

  opened++;
  card.classList.add("revealed");
  card.innerHTML = `<div style="font-size:22px; padding-top:20px; color:#4a148c; font-weight:700">${card.dataset.reward}</div>`;

  revealedRewards.push(card.dataset.reward);

  checkWin();
}

// KAZANÃ‡ KONTROL
function checkWin() {
  const count = {};

  revealedRewards.forEach(r => count[r] = (count[r] || 0) + 1);

  for (let reward in count) {
    if (count[reward] === 3) {
      win(reward);
    }
  }

  // 6 hakkÄ± bitirdiyse kaybetti
  if (opened === 6 && !document.getElementById("resultBox").style.display) {
    lose();
  }
}

// KAZANDI
function win(reward) {
  canPlay = false;

  const box = document.getElementById("resultBox");
  const text = document.getElementById("resultText");

  text.innerHTML = `ğŸ‰ TEBRÄ°KLER!<br> ${reward} indirim kazandÄ±nÄ±z!<br><br>Ekran gÃ¶rÃ¼ntÃ¼sÃ¼ alÄ±p @Femud_tr hesabÄ±na gÃ¶nderiniz.`;
  box.style.display = "block";

  sendToSheet(reward);
}

// KAYBETTÄ°
function lose() {
  const box = document.getElementById("resultBox");
  const text = document.getElementById("resultText");

  text.innerHTML = `ğŸ˜” ÃœzgÃ¼nÃ¼z,<br> bu turda Ã¶dÃ¼l kazanamadÄ±nÄ±z.`;
  box.style.display = "block";

  sendToSheet("KazanamadÄ±");
}

// GOOGLE SHEETâ€™E KAYIT
function sendToSheet(prize) {
  const name = localStorage.getItem("femud_name") || "Bilinmiyor";
  const ig = localStorage.getItem("femud_ig") || "Bilinmiyor";

  fetch(API_URL, {
    method: "POST",
    mode: "no-cors",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      game: "kazikazan",
      name: name,
      ig: ig,
      prize: prize
    })
  });
}

// HEDÄ°YE TALEP BUTONU
document.getElementById("claimBtn").onclick = () => {
  window.location.href = "https://instagram.com/femud_tr";
};
</script>

</body>
</html>